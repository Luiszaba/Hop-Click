<style>
div {
  font-size: 20px;
  text-align: left; 
}
</style>

<%= form_with(model: objective) do |form| %>

  <% if objective.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(objective.errors.count, "error") %> prohibited this
        objective from being saved:</h2>

      <ul>
        <% objective.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
<form class="new_objective_form">
  <div class="name field">
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>
  <div class="description field">
    <%= form.label :description %>
    <%= form.text_area :description %>
  </div>
  <div class="user field">
    <%= form.label :user_id, "Assign task to a user" %>
    <%= form.collection_select :user_id, User.all, :id, :name %>
  </div>
  <div class="date field">
    <%= form.label :due_date %>
    <%= form.date_select :due_date %>
  </div>
  <div class="group field">
    <%= form.label :group, "Group" %>
    <%= form.collection_select :group_id, Group.all, :id, :name %>
  </div>
  <div class="completed field">
    <%= form.label :completed %>
    <%= form.check_box :completed %>
  </div>
  <div class="actions">
    <%= form.submit %>
  </div>  
<% end %>
<div id="postResult">
<h1 id="postName"></h1>
<p id="postDescription">
<p id="postUser"></p>
<p id="postDate"></p>
<p id="postGroup"></p>
<p id="postComplete"></p>
</div>
<script type="text/javascript" charset="utf-8">
  $(function () {
    $('form').submit(function(event) {
      //prevent form from submitting the default way
      event.preventDefault();
      let values = $(this).serialize();
      let posting = $.post('/objectives', values);
      posting.done(function(data){
        let objective = data;
        // unable to define objective["name"]
        $("#postName").text(objective["name"])
        $("#postDescription").text(objective["objective"])
        $("#postUser").text(objective["user_id"])
        $("#postDate").text(objective["due_date"])
        $("#postGroup").text(obective["group_id"])
        $("#postComplete").check_box(objective["completed"])
        console.log(data)
      })
      alert("default action paused");
    });
  });
</script>
</form>
